# Используем официальный образ последней стабильной версии Go (обновлено до 1.24.1)
FROM golang:1.24.1-alpine

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем файлы зависимостей и скачиваем их
COPY go.mod go.sum ./
RUN go mod download

# Копируем исходный код приложения
COPY . .

# Сборка приложения
RUN go build -o main ./cmd

# Открываем порт приложения
EXPOSE 8080

# Запуск приложения
CMD ["./main"]
